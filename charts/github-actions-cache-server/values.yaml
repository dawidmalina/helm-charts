replicaCount: 1

image:
  repository: ghcr.io
  name: falcondev-oss/github-actions-cache-server
  # renovate: datasource=github-releases depName=falcondev-oss/github-actions-cache-server extractVersion=^v(?<version>.*)$
  tag: 8.1.4

serviceAccount: {}

ingress:
  enabled: false
  host: example.com
  paths:
    - path: /
      pathType: Prefix
  tls: {}
    # Example configuration for TLS (disabled by default)
    # tls:
    #   - hosts:
    #       - example.com
    #       - www.example.com
    #     secretName: my-tls-secret

service:
  type: ClusterIP
  port: 3000

env: {}
  # - name: DB_SQLITE_PATH
  #   value: /opt/data/sqlite.db
  # - name: URL_ACCESS_TOKEN
  #   value: random_token
  # - name: API_BASE_URL
  #   value: http://localhost:3000

podSecurityContext:
  fsGroup: 10000
  runAsUser: 10000

volumeClaim:
  name: sqlite-claim

volumes:
  - name: sqlite
    persistentVolumeClaim:
      claimName: sqlite-claim

volumeMounts:
  - mountPath: /opt/data
    name: sqlite

dnsConfig:
  enabled: false
  # Custom nameservers to resolve external domains like GitHub API
  nameservers:
    - "8.8.8.8"      # Google DNS - reliable for external resolution
    - "1.1.1.1"      # Cloudflare DNS - fast alternative
  # DNS search domains - typically your cluster domain
  searches: []
  # DNS options for fine-tuning resolution behavior
  options:
    - name: ndots
      value: "2"     # Reduces DNS queries for external domains
    - name: timeout
      value: "2"     # Faster timeout for failed queries
    - name: attempts
      value: "2"     # Limit retry attempts

livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 6
  timeoutSeconds: 3
  periodSeconds: 3
  failureThreshold: 5

readinessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 6
  timeoutSeconds: 3
  periodSeconds: 3
  failureThreshold: 5

podDisruptionBudget:
  enabled: true
  minAvailable: 1
